---
layout: page
title: Browser Downloads
date: 2011-08-15 23:13:27.000000000 +02:00
categories: []
tags: []
status: publish
type: page
published: true
meta:
  sharing_disabled: '1'
  _wp_page_template: default
  _edit_last: '3698964'
author: 
---
<p>The easiest and best way of dealing with file downloads is to avoid the pesky file download dialogs altogether.<br />
This is done by programatically telling the browser to automatically save files to a certain directory, that your test can access.</p>
<h2>Firefox</h2>
<p>[sourcecode language="ruby" light="true"]<br />
download_directory = &quot;#{Dir.pwd}/downloads&quot;<br />
download_directory.gsub!(&quot;/&quot;, &quot;\\&quot;) if Selenium::WebDriver::Platform.windows?</p>
<p>profile = Selenium::WebDriver::Firefox::Profile.new<br />
profile['browser.download.folderList'] = 2 # custom location<br />
profile['browser.download.dir'] = download_directory<br />
profile['browser.helperApps.neverAsk.saveToDisk'] = &quot;text/csv,application/pdf&quot;</p>
<p>b = Watir::Browser.new :firefox, :profile =&gt; profile<br />
[/sourcecode]</p>
<p>A full list of these Firefox options are available in firefox by typing '<em>about:config</em>' in the address bar.</p>
<p>If you want to know a way to work out the file types (eg. application/pdf) then you can read <a href="http://watirmelon.com/2011/09/07/determining-file-mime-types-to-autosave-using-firefox-watir-webdriver/">the following blog post</a> for an step by step guide.</p>
<h2>Chrome</h2>
<p>[sourcecode language="ruby" light="true"]<br />
download_directory = &quot;#{Dir.pwd}/downloads&quot;<br />
download_directory.gsub!(&quot;/&quot;, &quot;\\&quot;) if  Selenium::WebDriver::Platform.windows?</p>
<p>profile = Selenium::WebDriver::Chrome::Profile.new<br />
profile['download.prompt_for_download'] = false<br />
profile['download.default_directory'] = download_directory</p>
<p>b = Watir::Browser.new :chrome, :profile =&gt; profile<br />
[/sourcecode]</p>
<p>See a full list of Chrome <a href="http://codesearch.google.com/codesearch#OAMlx_jo-ck/src/chrome/common/pref_names.cc&amp;exact_package=chromium">preferences</a></p>
